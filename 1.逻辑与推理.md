# 逻辑与推理

## 背景和基础

**逻辑与推理**是人工智能的核心问题。

### 基于符号主义AI的推理

* 所有概念都可以通过**符号**以及**符号之间的关系**表示。
* 符号主义人工智能方法基于的假设：可以通过逻辑方法对符号及其关系进行计算，实现逻辑推理，辨析符号描述的内容是否正确。
  * 可能现在我给出p和q，然后告诉一个运算法则，通过符号p，q和运算来推东西，推推看能不能推出一个新的r，看看r代表的东西是不是对的。

### 知识工程/专家系统

根据专家定义的知识和经验，进行推理和判断，从而模拟人类专家的决策过程来解决问题。

* 个人感觉就是规定一下一些基础的东西，不然没法推理，没有规则啥的怎么推。

### 知识工程vs机器学习

* 知识工程
  * 基于**手工设计规则**建立专家系统。（定义如此）
  * **结果容易解释**（毕竟是人规定的东西）
  * 难以保证一致性和准确性（人定义的东西是有上限的）
* 机器学习
  * 基于数据**自动学习**（符合绪论中的内容）
  * 结果不易解释（重数据，没啥逻辑）
  * **可信度高**（感觉很看重数据，输入输出啥的，那输入输出的东西就没啥毛病）

## 命题逻辑和谓词逻辑

### 命题逻辑

* 命题：一个能**确定真假**的描述

* 原子命题：不包含其他命题作为组成部分的命题。

* 复合命题：包含其他命题作为组成部分的命题。

* 可通过**命题联结词**对已有命题进行组合来得到新命题。联结之后的命题肯定是复合命题。

* 主要的命题联结词

  |                 命题连接符号                 |
  | :------------------------------------------: |
  |              与（and）$ \land$               |
  |               或（or） $ \lor$               |
  |               非（not）$\neg$                |
  |       条件（conditional）$\rightarrow$       |
  | 双向条件（bio-conditional）$\leftrightarrow$ |

* 复合命题的真假可以通过真值表来计算

  * eg：![image-20230606215949974](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230606215949974.png)

* **逻辑等价**：给定命题p和q，如果p$\leftrightarrow $q是重言式（永真式），那么p和q在逻辑上等价。（用三个等号来表示）

* 逻辑等价的例子

  * ![image-20230606220337678](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230606220337678.png)
  * 感觉稍微记一下蕴含消除和De Morgan，虽然离散学过，但都忘完了。

* 命题逻辑的推理规则

  * ![image-20230606222318587](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230606222318587.png)

    ​	这个意思是横线上面的如果是真，横线下面的就是真

    ​	假言就是假定我是真，还能推出你，你就是真。

    ​	与消解就是一堆与，变成单个的。

    ​	与导入就是一堆命题，给与起来。

  * ![image-20230606222604047](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230606222604047.png)

    单项消解或单项归结：感觉都是或？我或你，但不是你，那就是我。

    消解或归结：差别在是不是单项？一堆或里有一个假的或者可真可假的，把这个摇摆的给ktv了，剩下的或起来抱团取暖。

    **归结消解**就狠狠的从或里ktv就行

  * 例题

    * ![image-20230606223641349](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230606223641349.png)
    * 感觉还要记住一个可以**假设**。

### 从命题逻辑到谓词逻辑

* 命题逻辑的局限性：在命题逻辑中，每个陈述句是最基本的单位。无法对原子命题进行分解。在命题逻辑中，不能表达局部与整体，一般与个别的关系。
  * 鼠鼠的理解就是一个原子命题的内容可以再分，但是原子命题没法再分
  * eg：苏格拉底论断，感觉如果把`a：所有人总是要死的`写成`p->q`也没啥问题，但是命题逻辑做不到。  

### 谓词逻辑

* 谓词逻辑可以把原子命题细化，分解出**个体、谓词和量词**。这三个东西是谓词逻辑的三个核心概念。
* 个体：可以独立存在的具体或抽象的概念。
* 谓词：刻画个体**属性**或者描述个体之间**关系**存在性的元素，值为**真或假**。
  * eg：P（x）表示：x<$x^2 $ ,P就是**谓词**，x是**个体词**，x被称为**变量**。x的具体取值叫**个体常项**。
  * P（0.1）使得谓词为假（谓词有值且为真或假），这里0.1就是个体常项。
  * P（x）是一元谓词（包括一个个体），P（x1，x2，...，xn）被称为n元谓词。
* 量词：
  * 全程量词	$\forall x $ 注意是 $\forall $和x是锁死的，下同。
  * 存在量词   $\exists x $
  * 一些组合：
    * ![image-20230606231958453](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230606231958453.png)
  * 约束变元：
    * 在全称量词或者存在量词的约束条件下的变量符号称为约束变元。（不管是任意还是存在，只要有这两个符号，就都是约束变元，确定了就被约束了。）
  * 自由变元
    * 没有这俩晦气的forall和exists就是自由变元
* 推理规则：
  * ![image-20230606232622704](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230606232622704.png)
  * 理解：
    * 全称量词消去：对所有的都行，简化一下，可以把$\forall x$变成自由变元y，y没确定，想是啥就是啥。
    * 全称量词引入：既然y不确定，想干啥就干啥，说明对任意x都行。
    * 存在量词消去：存在一个这样的x，那么这个x可以是a。
    * 存在量词引入：有一个成立，说明就是存在的。
  * 例题：
    * ![image-20230607012409205](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607012409205.png)
    * 感觉就是UI用的时候，直接就可以变成存在量词消去时用的那个a。然后存在量词和特定的a就互相转换。

## 知识图谱推理

### 发展和融合

* 发展和融合：
  * ![image-20230607012706076](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607012706076.png)
  * 符号逻辑-》专家系统-》本体概念-》语义web（看起来好像没啥用）
  * 似乎知识图谱是逻辑推理在今天的体现。

### 专家系统

* 专家系统的构成
  * ![image-20230607013000322](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607013000322.png)
  * 感觉不是很重要

### 知识图谱

* 知识图谱：基本概念
  * 知识图谱本质上是一种**大规模语义网络**。包括：
    * 实体
    * 概念
    * 实体和概念之间的语义联系
  * 是大数据时代**知识表示**的重要方式之一。（看着有点像ER图类图之类的）
  * eg：![image-20230607013338858](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607013338858.png)
* 语义网络
  * 语义网络是用**图形化**的形式通过点和边**表达知识**的方式，基本组成元素就是点和边。
  * ![image-20230607013406816](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607013406816.png)
* 知识图谱构成
  * 这里给的是水利工程的例子
  * ![image-20230607013533773](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607013533773.png)
  * 构成如下：
    * 节点--实体
      * 如：三峡大坝，葛洲坝
    * 节点--概念
      * 如：水利工程
    * 节点--属性
      * 三峡大坝的位置（长江流域）等
    * 边--关系
      * 位于，is a之类的
  * 一般来说，可以将知识图谱中任意两个相连节点及其连接边表示成一个三元组。（left_node,relation,right_node)
  * eg1：（三峡大坝，位于，长江流域）
  * eg2：（David，Father，Mike）（捏麻麻的，刚刚手贱，差点把这个整没了，心态崩了）
* 后面是技术要素和系统工程观，感觉没用。
* 知识图谱的意义和应用，略了
* 知识图谱：推理（还是以水利工程为例）
  * ![image-20230607015613433](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607015613433.png)
  * ？？？PPT上也没说从这个例子推啥，怎么推啊
  * 下面是基于一些东西的推理
    * 基于规则的推理
      * **归纳逻辑程序设计**（ILP）算法
    * 基于图结构的推理
      * **路径排序算法**
    * 基于分布式表示学习的推理
      * **转移距离模型**
  * 刚刚我们说的两个节点加一个边的三元组，可以表示为一阶逻辑（FOL），这为基于知识图谱的推理创造了条件。
    * 例如<奥巴马，出生地，夏威夷>和<夏威夷，属于，美国>，两个三元组，可以得到<奥巴马，国籍，美国>

### FOIL算法

* 知识图谱推理：归纳学习
  * 归纳逻辑程序设计算法（ILP）
    * ILP是机器学习和逻辑程序设计交叉领域的研究内容（感觉记一个**逻辑程序设计**吧，机器学习重视数据，所以前面要加个归纳，不能拿一堆数据来浪费，所以还是归纳一下。这个逻辑程序设计挺新鲜的）
    * ILP用一阶谓词逻辑进行知识表示，通过修改和扩充逻辑表达式对现有知识归纳，完成推理任务。（感觉就是对谓词逻辑进行补充，例如p->q，一直丰富这个p的内容）
    * **FOIL**是ILP的代表性方法，通过**序贯覆盖**实现规则推理。（我测，什么是序贯推理）
* 知识图谱推理：FOIL
  * ![image-20230607020833973](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607020833973.png)
  * 给你一个前提，推出目标谓词。
  * 正例：在知识图谱里是对的谓词关系。（谓词的值有真或假，这里是目标谓词的值为真）
  * 反例，所有关系已知但不是正例。比如a和b的关系知道了是P（a，b），就不可能是X（a，b）了，但我的目标谓词是X（a，b），那这个X（a，b）是反例。记作$\neg $X(a,b)。所以必须知道a，b的关系不是X（a，b）才能说是反例，必须是一个确定的P（a，b）才行，不确定的话X（a，b）不能当反例。
  * 推理思路：**逐步给目标谓词加前提约束谓词，直到构成的推理规则不覆盖任何反例。**
  * 下面是个例子
    * ![image-20230607021549875](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607021549875.png)
    * ![image-20230607021619968](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607021619968.png)
    * ![image-20230607021718677](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607021718677.png)
      * 注意这里背景知识就是除了目标谓词之外的所有关系。目标谓词的集合就是背景知识里的谓词中的个体常项放里面取非，然后加上一个正确的目标谓词。
    * 过程如下：
      * ![image-20230607021943419](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607021943419.png)
      * ![image-20230607022406067](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607022406067.png)
        * 可见开始是把所有的谓词都一股脑列出来，然后已有的变量排序，（x，y），（x，z）...（z，y），这里每个谓词有六个。一共三个谓词，所以有3*6=18项。对于每一项，从背景知识里找该谓词即可，然后对应的两个个体常项往目标谓词里放，看看是不是反例。在此基础上找到一个m+‘最多，m-’最少的，加到前提里。
      * 加到前提之后，要对正反例进行清算。看看进入前提里的谓词是啥，找出和他冲突的，把冲突的给清算了。
        * ![image-20230607023415698](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607023415698.png)
        * 比如这里，Couple（x，z）加入之后，得到的如上面所说，那因为Couple（x，z）在已知里x只能是David，所以要把目标谓词里不是David的给去掉。
      * 重复上面的步骤，一直找增益值最大的就行。知道新得到的m+是1，m-是0。（主要是m-要是0）
  * 我们可以看出，**FOIL**是从实例出发的，这个实例有背景知识和正例反例，是一种**归纳学习**。

### 路径排序推理

* 知识图谱推理：路径排序推理
  * 路径排序推理算法（PRA）的基本思想是将实体之间的关联路径作为特征，来学习目标关系的分类器。
  * 工作流程
    * 特征抽取：生成并选择路径特征集合。生成路径的方式有**随机游走**，**广度优先搜索**，**深度优先搜索**等。
    * 特征计算：计算每个训练样例的特征值P（s->j,Πj），该节点表示从s出发，经过关系路径Πj到达实体节点t的概率；也可以表示为布尔值，表示s和j之间是否存在路径Πj；还可以是s和t之间路径Πj的出现频次和概率等。（怎么ppt又说一遍概率，刚刚不是说过了吗）
    * 分类器训练：根据训练样例的特征值，为目标关系训练分类器。训练好分类器之后，将该分类器用于推理两个实体之间是否存在目标关系。（说白了最终就是弄这个分类器？）
    * 真看不懂，上个例子吧
      * ![image-20230607133111712](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607133111712.png)
      * 感觉生成的样例就是现有的几条用线连起来的二元组，然后找这些二元组用**路径**是如何联系的，**路径**看起来是沿着关系来的（可以说关系是车站？）把得出的每个路径当作一个行向量的一个项，有n个路径就能得到n维向量。然后**重新**拿训练样例往向量里带入，看看现在的每个训练样例符合几个向量。（说重新是因为路径刚开始是由样例得到，但是一个样例可能符合多个路径，要重新看一下）。然后看看新样例的特征值，和结果是1的特征值一样的话目标关系成立，不然就不成立。

    * 感觉最多只能看懂这个例子了。跟工作流程没啥联系。


### 基于分布式表示的知识推理

* 知识图谱推理：基于分布式表示的知识推理
  * 随着深度学习应用的进展，**自然语言处理**（NLP），通过无监督学习将一个单词表示成一个隐向量的分布式表示方法取得很好的效果。
  * 将知识图谱中的节点和节点之间的关系映射到连续数值空间中。（看不懂）
  * 例子：
    * ![image-20230607140554982](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607140554982.png)
    * 大概就是把三元组里的每一个元素都变成一个向量，然后度量函数要使得三元组放进去之后取值**最小**（理解为差值最小？）。得到度量函数之后可以拿其他的两个节点或者三元组来判断（可能比较前两个向量加起来和第三个向量是不是在差值范围内）


## 因果推理

### 前置知识

* 很想吐槽，逻辑与推理不是很重要为啥内容这么多
* **相关性**不代表**因果性**。
* 相关性是**对称**的，因果性是**不对称**的。
  * 不对称的体现如：A导致了B，就不能说B导致了A，是要有个先后顺序的。
  * 相关性是对称的，简单来说就是corr（X,Y)=corr（Y,X）
    * ![image-20230607141902919](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607141902919.png)
    * AI人称大概统
* 用**介入主义**来定义因果。外在的介入是因，产生的变化是果。（你硬来介入掺和，导致我作业写不完了，你就是因，写不完作业就是果，我测你马马）

### 辛普森悖论

下面是几个例子

* ![image-20230607142603314](D:\2023春\AI\image-20230607142603314.png)
* ![image-20230607142635201](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607142635201.png)
* ![image-20230607142658684](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607142658684.png)
* 大概就是如果不多一个角度看，得到的结论不一定很对。（但是工程学真的容易进？）

### 因果推理

* 统计机器学习中存在的问题--相关性
* 相关性是不稳定的，不可解释的。（比如看到一个狗在草地能看出是狗，在沙漠就看不出来是狗了，因为改变了环境，相关性不大）
* 因果之梯：
  * ![image-20230607143332125](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607143332125.png)
  * 一步步离谱属于是，开始还有事实和数据支撑，然后就改数据，然后就连数据都不改。但这就是从低级到高级。

### 因果推理的主要模型

* 结构因果模型
* 因果图：因果图是**有向无环图**（DAG），DAG可以用于描述数据的生成机制。这样描述变量联合分布或者数据生成机制的模型，被称为”**贝叶斯网络**“

#### 结构因果模型

* 外生变量集U和内生变量集V
* 变量之间的映射集（表示函数集）F。
* ![image-20230607151650416](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607151650416.png)
* 看着有点像函数，外生就是自变量，就是因。内生就是因变量，就是果。F是他的影响过程。

####  因果图

* 每个结构因果模型都和一个因果图对应
  * 因果图中的节点相当于结构因果模型的一个变量集里包含的变量。
  * 节点之间的边表示函数f。
  * 若fx（Y）=X（X的取值依赖于Y），则在G中有一条Y指向X的边。
  * ![image-20230607154324530](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607154324530.png)

#### 结构因果模型和因果图

* 结构因果模型中的原因和因果图中的原因定义如下：（注意一个**直接原因**和**潜在原因**就行）
  * ![image-20230607154545812](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607154545812.png)
* ![image-20230607154918474](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607154918474.png)
  * 可见未知的外生变量可以叫做**误差项**。
* 因果图中联合概率分布
  * ![image-20230607155214059](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607155214059.png)
    * 记住这个x-》y-》z的例子就行。
  * ![image-20230607155325878](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607155325878.png)
    * 求联合概率分布的时候，每一项都要写，有亲爹的把亲爹放`|`后。（可能有好几个亲爹，就都要把亲爹带上）

#### 因果图基本结构

有**链式图**，**分连图**和**汇连图**三种。

这三种结构是构成贝叶斯网络和因果图的基本结构。

分析X和Y之间的是否存在关联或因果关系，要考虑Z的存在

##### 链式图

一路指到底，我踏马指指指

* ![image-20230607185116672](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607185116672.png)
* ![image-20230607191200425](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607191200425.png)
* 一路指的过程中，感情就指淡了，如果中间的Z确定了，X，Y就条件独立了，就没啥关系了。也可以说Z确定了就被拦腰截断了，一截断了X，Y自然条件独立。记一下**P（X,Y|Z）=P(X|Z)*P(Y|Z)**

##### 分连图

包含三个节点两条边（好像这三个因果图的基本结构都是这样）。因为是分连，主打一个**分**，所以是由以一个节点为基准往其他两个散开（分开），指向第二，第三个节点

![image-20230607192937629](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607192937629.png)

* 可见儿子等于k*亲爹相加+C。

![image-20230607193041324](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607193041324.png)

和链式图一样，如果Z确定了，X，Y独立。但链式图里是腰斩，这个是亲爹没了。举的例子就很合适。

![image-20230607193434140](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607193434140.png)

##### 汇连图

汇在一起吧。第一个节点和第二个节点指向第三个。

![image-20230607193628068](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607193628068.png)

给定孩子，找到了父母，父母之间多少有点关系。

不给定孩子，也找不到父母，X和Y就没啥关系。

##### 上面三个图的总结

三种图里都有个Z。

在链式图里叫**中介变量**，有中介效应。

在分连图里叫**混杂因子**，会因果倒置。（为什么啊？）、

在汇连图里叫**对撞因子**，会有选择偏差。（为什么啊？）

##### D-分离

可用于判断任意两个节点的**相关性和独立性**。

* 若存在一条路径将两个节点连通，就称这两个节点是**有向连接**的，即这两个节点是相关的；
* 若不存在这样的路径，则两个节点就是**有向分离**的，即相互独立。

定义D-分离：路径p被**限定集Z阻塞（block）**当且仅当：

* 路径p含有链结构或分连结构且中间节点在Z中
* 路径p含有汇连结构且汇连节点及其后代并不在Z中

若Z阻塞了节点X和Y之间的每一条路径，则称给定Z时，X和Y是D-分离的，即给定Z时，X和Y条件独立。（和上面的论述也差不多）

* Z是**限定集**时，也就是**给定Z**时，链式图和分连图中的X和Y是D-分离的，也就是不相关的。
* Z**不是限定集**时，**不给定Z**，汇连图的X和Y是D-分离的，也就是不相关的。
* 例子：![image-20230607225951416](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607225951416.png)
  * 解释就是如果看两个节点是否相关，不能只看是不是单方向的箭头，要看**汇连，分连和链式**的特点。注意**汇连**是如果不指定儿子，父母反而没关系。

##### 因果图基本结构-总结

![image-20230607230317352](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607230317352.png)

其实上面都有列举。这里再强化记忆一下吧，链式图因为是拦腰，所以是**中介变量**；分连图因为是散开，可以类比成一滴墨水在水里散开，所以是**混杂因子**，汇连图因为是两个指向一个，可以理解成动量在撞，所以是**对撞因子**。

### 因果推理：干预的因果效应

* 干预指的是固定（fix）系统中的变量，然后改变系统，观察其他变量的变化。（什么b玩意？不是固定变量了吗）

* 是因果之梯第二阶段的内容，**干预**。第一部分是**关联**，第三部分是**反事实**。

  * 方法1：随机对照试验（**RCT**）
  * 方法2：do算子
    * 使用相应的**调整公式**，从observation data中测算真正的因果效应（去除混杂因素的影响）而无需真正的实现。因为RCT在很多情况下不可行。（大概就是给个很好的算法可以直接理论上用吧，有的东西实践是不太现实的）好好调整，哥几个等你。

* do算子：

  让我们好好看看do算子的含金量。

  ![image-20230607232543707](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607232543707.png)

  这个do是用在do what上，就是做了X=x的操作，这种情况下Y=y的概率。要注意条件概率属于**关联**。

* 混杂：![image-20230607235805253](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230607235805253.png)

  * 莫名感觉这个do算子是来提纯的。

* 还是看看远方的ppt的定义吧：

  * ![image-20230608000229815](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230608000229815.png)
  * 可以说这个X原来可以是x1，x2，x3，做了do算子，就是把所有的X的值就只能是规定的x了，x1，x2，x3在这里会被改变。卧槽 吊。

* 因果效应差

  * 注意**因果效应**和**因果效应差**的区别，下面是一个例子
  * ![image-20230608001526430](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230608001526430.png)
  * 注意如果do（x）了，就要把指向x的边全部移除。
  * 下面是一个因果图变操纵图模型的例子
  * ![image-20230608002449821](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230608002449821.png)
  * 这里指向X的只能是x。（注意大X和小x的区别）
  
* 调整公式

  * ![image-20230608141157165](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230608141157165.png)
  * 理解就是如果do（X=x）的话，把第三个变量Z揪出来，把他所有可能的取值*取到该值的概率求和。
  * 例子：![image-20230608141835717](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230608141835717.png)
  * 这里就是把以X和Z为条件的情况下，Y的概率给出来了，直接带进去算就行。

#### 因果图模型：反事实

* 干预是在**同一个世界**进行，用于分析针对**整体层面**的因果总效应。如：吸烟是否肺癌。
* 反事实是在时候从**平行世界**发生的事情。分析的是**个体层面**的效应。如：如果他不吸烟，会活多久。

##### 反事实模型

![image-20230609202724067](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230609202724067.png)

真的看不懂，我麻了，反事实主要是假定环境吧，所以自变量是环境。Yx(u)，u是环境。就比如X以前是aU+1，现在让他，如果是x，那么Y会变得怎样？这就是反事实模型。这个b修正模型是什么意思啊。

![image-20230609203852853](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230609203852853.png)

看这个图就能看懂了，u和x的取值都能影响y，但是y的取值影响不了x。

![image-20230609204435350](C:\Users\bb\AppData\Roaming\Typora\typora-user-images\image-20230609204435350.png)

看懂这个例子就行，有点像初中数学题。









